"use strict";(self.webpackChunksocial_glot=self.webpackChunksocial_glot||[]).push([[998],{2998:function(e,n,t){t.r(n),t.d(n,{Chat:function(){return g},default:function(){return C}});var s=t(2791),r=t(6434),a=t(6871),c=t(580),i=t(8328),u=t(885),l="Chat_chatHistory__ZQCyU",o="Chat_item__K-Y8t",h="Chat_ava__YxRxt",d="Chat_name__q9Nj+",f="Chat_body__dvFOJ",v="Chat_sendMessage__kylJ8",x=t(184),j=s.memo((function(e){var n=e.message;return(0,x.jsxs)("div",{className:o,children:[(0,x.jsx)("img",{className:h,src:n.photo}),(0,x.jsxs)("div",{className:f,children:[(0,x.jsx)("div",{className:d,children:n.userName}),(0,x.jsx)("div",{children:n.message})]})]})})),_=function(){var e=(0,r.v9)((function(e){return e.chat.messages})),n=(0,s.useRef)(null),t=(0,s.useState)(!1),a=(0,u.Z)(t,2),c=a[0],i=a[1];return(0,s.useEffect)((function(){var e;c&&(null===(e=n.current)||void 0===e||e.scrollIntoView(!0))}),[e]),(0,x.jsxs)("div",{className:l,onScroll:function(e){var n=e.currentTarget;Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<100?!c&&i(!0):c&&i(!1)},children:[e.map((function(e,n){return(0,x.jsx)(j,{message:e},n)})),(0,x.jsx)("div",{ref:n})]})},m=function(){var e=(0,s.useState)(""),n=(0,u.Z)(e,2),t=n[0],a=n[1],i=(0,r.v9)((function(e){return e.chat.status})),l=(0,r.I0)();return(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)("input",{onChange:function(e){return a(e.currentTarget.value)},value:t}),(0,x.jsx)("button",{disabled:"ready"!==i,onClick:function(){t&&(l((0,c.bG)(t)),a(""))},children:"send"})]})},g=function(){var e=(0,r.I0)(),n=(0,r.v9)((function(e){return e.chat.status})),t=(0,r.v9)(i.Od);return(0,s.useEffect)((function(){return e((0,c.WE)()),function(){e((0,c.R7)())}}),[]),t?(0,x.jsxs)(s.Fragment,{children:["error"===n&&(0,x.jsx)("div",{children:"Some error. Please refresh the page"}),(0,x.jsx)(_,{}),(0,x.jsx)(m,{})]}):(0,x.jsx)(a.Fg,{to:"/login"})},C=function(){return(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{children:"Chat"}),(0,x.jsx)(g,{})]})}}}]);
//# sourceMappingURL=998.69d0c579.chunk.js.map